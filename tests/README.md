# E2Eテスト

## 概要

このプロジェクトではPlaywrightを使用してE2E（エンドツーエンド）テストを実装しています。

## テストの実行

```bash
# 基本的なテスト実行
npm test

# ヘッドありモードでテスト実行（ブラウザを見ながら）
npm run test:headed

# UIモードでテスト実行（インタラクティブ）
npm run test:ui

# デバッグモードでテスト実行
npm run test:debug

# テストレポートを表示
npm run test:report
```

## テストの構成

### 1. 基本フロー (`meeting-flow.spec.ts`)

- **UIコンポーネントの表示確認**
  - メインタイトルとサブタイトル
  - 議事録一覧ボタン
  - AI稼働中ステータス

- **議事録一覧モーダル**
  - モーダルの開閉
  - 検索機能
  - 空状態の処理

- **会議準備フォーム**
  - タイトル入力
  - 背景情報入力
  - アジェンダ・参加者追加

- **メインセクション**
  - 会議タイプ選択
  - APIキー設定
  - コントロールボタン
  - 各セクション表示

### 2. エラーハンドリング

- ネットワークエラーの処理
- フィールド検証
- グレースフルな障害処理

### 3. アクセシビリティ

- キーボードナビゲーション
- ARIA属性の確認
- 支援技術との互換性

## テスト環境

- **ブラウザ**: Chromium, Firefox, Webkit
- **解像度**: デスクトップ（モバイルはオプション）
- **ベースURL**: http://localhost:3000
- **並列実行**: 有効

## CI/CD統合

- CI環境では自動リトライ（2回）
- 失敗時のスクリーンショット・動画記録
- HTML形式のレポート生成

## テストデータ

テストでは以下のようなサンプルデータを使用します：

- 会議タイトル: "テストミーティング"
- 背景情報: "Playwrightテストのためのサンプル会議です。"
- アジェンダ: "テスト項目1"
- 参加者: "テスト参加者"

## トラブルシューティング

### よくある問題

1. **テストタイムアウト**: 
   - ネットワーク接続を確認
   - 開発サーバーが起動していることを確認

2. **要素が見つからない**:
   - セレクターが正しいか確認
   - ページの読み込み完了を待機

3. **ブラウザが起動しない**:
   - `npx playwright install`でブラウザを再インストール

### デバッグのヒント

- `--headed`オプションでブラウザの動作を視覚的に確認
- `--debug`オプションでステップバイステップ実行
- `page.pause()`をテストコードに追加して一時停止